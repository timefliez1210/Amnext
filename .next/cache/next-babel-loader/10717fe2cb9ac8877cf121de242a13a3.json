{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\crfab\\\\Desktop\\\\forsage-boilerplate\\\\pages\\\\ref\\\\[id].js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// import { useRouter } from \"next/router\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport Web3 from \"web3\";\nimport { ABI, ADDRESS } from \"../../ethereum/web3\";\n\nconst RefLink = () => {\n  const {\n    0: contract,\n    1: setContract\n  } = useState(\"\");\n  const {\n    0: isExist,\n    1: setIsExist\n  } = useState(false);\n  const {\n    0: cost,\n    1: setCost\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: refAddress,\n    1: setRefAddress\n  } = useState(\"\");\n  const {\n    0: account,\n    1: setAccount\n  } = useState(\"\");\n  const router = useRouter();\n  const id = router.query.id;\n\n  async function loadBlockchainData() {\n    try {\n      const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n      const accounts = await web3.eth.getAccounts().then();\n      setAccount(accounts[0]);\n      console.log(account);\n    } catch (err) {\n      window.alert(\"trouble connecting\");\n    }\n\n    const contract = new web3.eth.Contract(ABI, ADDRESS);\n    setContract(contract);\n\n    try {\n      const isExists = await contract.methods.isUserExists(account).call();\n      setIsExist(isExists);\n      const refererAddress = await contract.methods.idToAddress(id).call();\n\n      if (refererAddress === 0x0000000000000000000000000000000000000000) {\n        window.alter(\"Referer does NOT exist, continue with default\");\n      } else {\n        setRefAddress(refererAddress);\n      }\n    } catch (err) {\n      window.alert(\"something other\" + err);\n    }\n\n    try {\n      const costs = await contract.methods.registrationCost().call();\n      setCost(costs);\n      setLoading(false);\n    } catch (err) {\n      window.alert(\"something third\");\n    }\n  }\n\n  async function loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert(\"Non-Ethereum browser detected. You should consider trying MetaMask!\");\n    }\n  }\n\n  async function register(refererAddress) {\n    setLoading(true);\n    await loadWeb3();\n    await loadBlockchainData();\n\n    if (isExist) {\n      router.push(\"/dashboard\");\n      setLoading(false);\n    } else {\n      await contract.methods.registrationExt(refererAddress).send({\n        value: cost,\n        from: account\n      }).then(function (receipt) {\n        router.push(\"/dashboard\");\n        setLoading(false);\n      });\n    }\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-2922224022\" + \" \" + \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2922224022\" + \" \" + \"hero-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2922224022\" + \" \" + \"picture-holder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"jsx-2922224022\" + \" \" + \"form-part\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-2922224022\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"Register\"), __jsx(\"p\", {\n    className: \"jsx-2922224022\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"Your inviter is ID \", router.query.id), __jsx(\"form\", {\n    onSubmit: async event => {\n      event.preventDefault();\n      await register(refAddress); //   const newUser = account;\n      //   setAccount(newUser);\n    },\n    className: \"jsx-2922224022\" + \" \" + \"automatic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, __jsx(\"button\", {\n    className: \"jsx-2922224022\" + \" \" + \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Register\")), __jsx(\"p\", {\n    className: \"jsx-2922224022\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"Telegram Channel @cryptoofficial\"))), __jsx(_JSXStyle, {\n    id: \"2922224022\",\n    __self: this\n  }, \".header.jsx-2922224022{width:100vw;height:100vh;overflow:hidden;background:rgba(16,1,62,1);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media only screen and (max-width:1000px){.header.jsx-2922224022{height:auto;}}.hero-image.jsx-2922224022{width:70vw;height:100vw;}.picture-holder.jsx-2922224022{width:100%;height:100vh;background-image:url(\\\"/assets/img/hero-picture.jpg\\\");background-repeat:no-repeat;background-size:contain;background-position:center;}.hero.jsx-2922224022{width:100%;}.form-part.jsx-2922224022{background:rgba(28,22,85,1);width:30vw;padding:60px;color:white;height:100vh;text-align:center;}p.jsx-2922224022{color:grey;}h1.jsx-2922224022{margin-top:15vh;margin-bottom:5vh;font-size:1.5em;}button.jsx-2922224022{width:100%;text-align:center;padding:20px 0;border-radius:30px;color:white;font-size:1.2em;}@media only screen and (max-width:1000px){.hero-image.jsx-2922224022{display:none;}.form-part.jsx-2922224022{width:95vw;margin:auto auto;}}.auto.jsx-2922224022{background:rgb(0,237,47);background:linear-gradient( 306deg, rgba(0,237,47,1) 29%, rgba(0,179,35,1) 64%, rgba(0,179,35,1) 83% );box-shadow:none;outline:none;border:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY3JmYWJcXERlc2t0b3BcXGZvcnNhZ2UtYm9pbGVycGxhdGVcXHBhZ2VzXFxyZWZcXFtpZF0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNkdrQixBQUd1QixBQVFFLEFBSUgsQUFJQSxBQVFBLEFBR29CLEFBU3BCLEFBR0ssQUFLTCxBQVVJLEFBR0YsQUFLYyxXQWpEZCxBQUlBLEFBUWYsQUFZQSxBQVFvQixBQWFDLENBekROLEFBUWIsQ0E4Q0EsR0Fma0IsUUExQnBCLEFBSXVELENBaEJyQyxBQWtFZixHQXhDVSxBQStCWCxDQWJlLEtBTEMsS0FaSCxFQTFCaUIsR0E0Q1gsTUFMckIsRUFaYyxXQWtCQSxDQWpCQyxJQTNCQSxPQTZDRyxFQTlCWSxBQWFWLGNBa0JwQixJQWpCQSxVQWIwQix1QkFpRFIsQ0FoRFcsYUFoQjdCLEVBaUVlLFlBaERmLENBaURjLFlBQ2QiLCJmaWxlIjoiQzpcXFVzZXJzXFxjcmZhYlxcRGVza3RvcFxcZm9yc2FnZS1ib2lsZXJwbGF0ZVxccGFnZXNcXHJlZlxcW2lkXS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcclxuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFdlYjMgZnJvbSBcIndlYjNcIjtcclxuaW1wb3J0IHsgQUJJLCBBRERSRVNTIH0gZnJvbSBcIi4uLy4uL2V0aGVyZXVtL3dlYjNcIjtcclxuXHJcbmNvbnN0IFJlZkxpbmsgPSAoKSA9PiB7XHJcbiAgY29uc3QgW2NvbnRyYWN0LCBzZXRDb250cmFjdF0gPSB1c2VTdGF0ZShcIlwiKTtcclxuICBjb25zdCBbaXNFeGlzdCwgc2V0SXNFeGlzdF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2Nvc3QsIHNldENvc3RdID0gdXNlU3RhdGUoXCJcIik7XHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtyZWZBZGRyZXNzLCBzZXRSZWZBZGRyZXNzXSA9IHVzZVN0YXRlKFwiXCIpO1xyXG4gIGNvbnN0IFthY2NvdW50LCBzZXRBY2NvdW50XSA9IHVzZVN0YXRlKFwiXCIpO1xyXG5cclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBjb25zdCBpZCA9IHJvdXRlci5xdWVyeS5pZDtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gbG9hZEJsb2NrY2hhaW5EYXRhKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgd2ViMyA9IG5ldyBXZWIzKFdlYjMuZ2l2ZW5Qcm92aWRlciB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6ODU0NVwiKTtcclxuICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB3ZWIzLmV0aC5nZXRBY2NvdW50cygpLnRoZW4oKTtcclxuICAgICAgc2V0QWNjb3VudChhY2NvdW50c1swXSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGFjY291bnQpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHdpbmRvdy5hbGVydChcInRyb3VibGUgY29ubmVjdGluZ1wiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRyYWN0ID0gbmV3IHdlYjMuZXRoLkNvbnRyYWN0KEFCSSwgQUREUkVTUyk7XHJcbiAgICBzZXRDb250cmFjdChjb250cmFjdCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBpc0V4aXN0cyA9IGF3YWl0IGNvbnRyYWN0Lm1ldGhvZHMuaXNVc2VyRXhpc3RzKGFjY291bnQpLmNhbGwoKTtcclxuICAgICAgc2V0SXNFeGlzdChpc0V4aXN0cyk7XHJcbiAgICAgIGNvbnN0IHJlZmVyZXJBZGRyZXNzID0gYXdhaXQgY29udHJhY3QubWV0aG9kcy5pZFRvQWRkcmVzcyhpZCkuY2FsbCgpO1xyXG4gICAgICBpZiAocmVmZXJlckFkZHJlc3MgPT09IDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCkge1xyXG4gICAgICAgIHdpbmRvdy5hbHRlcihcIlJlZmVyZXIgZG9lcyBOT1QgZXhpc3QsIGNvbnRpbnVlIHdpdGggZGVmYXVsdFwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRSZWZBZGRyZXNzKHJlZmVyZXJBZGRyZXNzKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHdpbmRvdy5hbGVydChcInNvbWV0aGluZyBvdGhlclwiICsgZXJyKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvc3RzID0gYXdhaXQgY29udHJhY3QubWV0aG9kcy5yZWdpc3RyYXRpb25Db3N0KCkuY2FsbCgpO1xyXG4gICAgICBzZXRDb3N0KGNvc3RzKTtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgd2luZG93LmFsZXJ0KFwic29tZXRoaW5nIHRoaXJkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gbG9hZFdlYjMoKSB7XHJcbiAgICBpZiAod2luZG93LmV0aGVyZXVtKSB7XHJcbiAgICAgIHdpbmRvdy53ZWIzID0gbmV3IFdlYjMod2luZG93LmV0aGVyZXVtKTtcclxuICAgICAgYXdhaXQgd2luZG93LmV0aGVyZXVtLmVuYWJsZSgpO1xyXG4gICAgfSBlbHNlIGlmICh3aW5kb3cud2ViMykge1xyXG4gICAgICB3aW5kb3cud2ViMyA9IG5ldyBXZWIzKHdpbmRvdy53ZWIzLmN1cnJlbnRQcm92aWRlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB3aW5kb3cuYWxlcnQoXHJcbiAgICAgICAgXCJOb24tRXRoZXJldW0gYnJvd3NlciBkZXRlY3RlZC4gWW91IHNob3VsZCBjb25zaWRlciB0cnlpbmcgTWV0YU1hc2shXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyKHJlZmVyZXJBZGRyZXNzKSB7XHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgYXdhaXQgbG9hZFdlYjMoKTtcclxuICAgIGF3YWl0IGxvYWRCbG9ja2NoYWluRGF0YSgpO1xyXG4gICAgaWYgKGlzRXhpc3QpIHtcclxuICAgICAgcm91dGVyLnB1c2goXCIvZGFzaGJvYXJkXCIpO1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGF3YWl0IGNvbnRyYWN0Lm1ldGhvZHNcclxuICAgICAgICAucmVnaXN0cmF0aW9uRXh0KHJlZmVyZXJBZGRyZXNzKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIHZhbHVlOiBjb3N0LFxyXG4gICAgICAgICAgZnJvbTogYWNjb3VudCxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZWNlaXB0KSB7XHJcbiAgICAgICAgICByb3V0ZXIucHVzaChcIi9kYXNoYm9hcmRcIik7XHJcbiAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZXJvLWltYWdlXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBpY3R1cmUtaG9sZGVyXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLXBhcnRcIj5cclxuICAgICAgICAgIDxoMT5SZWdpc3RlcjwvaDE+XHJcbiAgICAgICAgICA8cD5Zb3VyIGludml0ZXIgaXMgSUQge3JvdXRlci5xdWVyeS5pZH08L3A+XHJcbiAgICAgICAgICA8Zm9ybVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhdXRvbWF0aWNcIlxyXG4gICAgICAgICAgICBvblN1Ym1pdD17YXN5bmMgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICBhd2FpdCByZWdpc3RlcihyZWZBZGRyZXNzKTtcclxuICAgICAgICAgICAgICAvLyAgIGNvbnN0IG5ld1VzZXIgPSBhY2NvdW50O1xyXG4gICAgICAgICAgICAgIC8vICAgc2V0QWNjb3VudChuZXdVc2VyKTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJhdXRvXCI+XHJcbiAgICAgICAgICAgICAgUmVnaXN0ZXJcclxuICAgICAgICAgICAgICB7LyogeyFpc0xvYWRpbmcgPyA8Yj5BdXRob3Jpc2F0aW9uPC9iPiA6IDxiPkxvYWRpbmc8L2I+fSAqL31cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcblxyXG4gICAgICAgICAgPHA+VGVsZWdyYW0gQ2hhbm5lbCBAY3J5cHRvb2ZmaWNpYWw8L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgLmhlYWRlciB7XHJcbiAgICAgICAgICB3aWR0aDogMTAwdnc7XHJcbiAgICAgICAgICBoZWlnaHQ6IDEwMHZoO1xyXG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTYsIDEsIDYyLCAxKTtcclxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTAwMHB4KSB7XHJcbiAgICAgICAgICAuaGVhZGVyIHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAuaGVyby1pbWFnZSB7XHJcbiAgICAgICAgICB3aWR0aDogNzB2dztcclxuICAgICAgICAgIGhlaWdodDogMTAwdnc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5waWN0dXJlLWhvbGRlciB7XHJcbiAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIvYXNzZXRzL2ltZy9oZXJvLXBpY3R1cmUuanBnXCIpO1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcclxuICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmhlcm8ge1xyXG4gICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mb3JtLXBhcnQge1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyOCwgMjIsIDg1LCAxKTtcclxuICAgICAgICAgIHdpZHRoOiAzMHZ3O1xyXG4gICAgICAgICAgcGFkZGluZzogNjBweDtcclxuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwIHtcclxuICAgICAgICAgIGNvbG9yOiBncmV5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBoMSB7XHJcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxNXZoO1xyXG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXZoO1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxLjVlbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnV0dG9uIHtcclxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgcGFkZGluZzogMjBweCAwO1xyXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMzBweDtcclxuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgIGZvbnQtc2l6ZTogMS4yZW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEwMDBweCkge1xyXG4gICAgICAgICAgLmhlcm8taW1hZ2Uge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLmZvcm0tcGFydCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA5NXZ3O1xyXG4gICAgICAgICAgICBtYXJnaW46IGF1dG8gYXV0bztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLmF1dG8ge1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogcmdiKDAsIDIzNywgNDcpO1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxyXG4gICAgICAgICAgICAzMDZkZWcsXHJcbiAgICAgICAgICAgIHJnYmEoMCwgMjM3LCA0NywgMSkgMjklLFxyXG4gICAgICAgICAgICByZ2JhKDAsIDE3OSwgMzUsIDEpIDY0JSxcclxuICAgICAgICAgICAgcmdiYSgwLCAxNzksIDM1LCAxKSA4MyVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBib3gtc2hhZG93OiBub25lO1xyXG4gICAgICAgICAgb3V0bGluZTogbm9uZTtcclxuICAgICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgICB9XHJcbiAgICAgIGB9PC9zdHlsZT5cclxuICAgIDwvPlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZWZMaW5rO1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\crfab\\\\\\\\Desktop\\\\\\\\forsage-boilerplate\\\\\\\\pages\\\\\\\\ref\\\\\\\\[id].js */\"));\n};\n\nexport default RefLink;","map":{"version":3,"sources":["C:/Users/crfab/Desktop/forsage-boilerplate/pages/ref/[id].js"],"names":["useRouter","useState","Web3","ABI","ADDRESS","RefLink","contract","setContract","isExist","setIsExist","cost","setCost","loading","setLoading","refAddress","setRefAddress","account","setAccount","router","id","query","loadBlockchainData","web3","givenProvider","accounts","eth","getAccounts","then","console","log","err","window","alert","Contract","isExists","methods","isUserExists","call","refererAddress","idToAddress","alter","costs","registrationCost","loadWeb3","ethereum","enable","currentProvider","register","push","registrationExt","send","value","from","receipt","event","preventDefault"],"mappings":"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","sourcesContent":["// import { useRouter } from \"next/router\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useState } from \"react\";\r\nimport Web3 from \"web3\";\r\nimport { ABI, ADDRESS } from \"../../ethereum/web3\";\r\n\r\nconst RefLink = () => {\r\n  const [contract, setContract] = useState(\"\");\r\n  const [isExist, setIsExist] = useState(false);\r\n  const [cost, setCost] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [refAddress, setRefAddress] = useState(\"\");\r\n  const [account, setAccount] = useState(\"\");\r\n\r\n  const router = useRouter();\r\n  const id = router.query.id;\r\n\r\n  async function loadBlockchainData() {\r\n    try {\r\n      const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\r\n      const accounts = await web3.eth.getAccounts().then();\r\n      setAccount(accounts[0]);\r\n      console.log(account);\r\n    } catch (err) {\r\n      window.alert(\"trouble connecting\");\r\n    }\r\n    const contract = new web3.eth.Contract(ABI, ADDRESS);\r\n    setContract(contract);\r\n    try {\r\n      const isExists = await contract.methods.isUserExists(account).call();\r\n      setIsExist(isExists);\r\n      const refererAddress = await contract.methods.idToAddress(id).call();\r\n      if (refererAddress === 0x0000000000000000000000000000000000000000) {\r\n        window.alter(\"Referer does NOT exist, continue with default\");\r\n      } else {\r\n        setRefAddress(refererAddress);\r\n      }\r\n    } catch (err) {\r\n      window.alert(\"something other\" + err);\r\n    }\r\n    try {\r\n      const costs = await contract.methods.registrationCost().call();\r\n      setCost(costs);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      window.alert(\"something third\");\r\n    }\r\n  }\r\n\r\n  async function loadWeb3() {\r\n    if (window.ethereum) {\r\n      window.web3 = new Web3(window.ethereum);\r\n      await window.ethereum.enable();\r\n    } else if (window.web3) {\r\n      window.web3 = new Web3(window.web3.currentProvider);\r\n    } else {\r\n      window.alert(\r\n        \"Non-Ethereum browser detected. You should consider trying MetaMask!\"\r\n      );\r\n    }\r\n  }\r\n\r\n  async function register(refererAddress) {\r\n    setLoading(true);\r\n    await loadWeb3();\r\n    await loadBlockchainData();\r\n    if (isExist) {\r\n      router.push(\"/dashboard\");\r\n      setLoading(false);\r\n    } else {\r\n      await contract.methods\r\n        .registrationExt(refererAddress)\r\n        .send({\r\n          value: cost,\r\n          from: account,\r\n        })\r\n        .then(function (receipt) {\r\n          router.push(\"/dashboard\");\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"header\">\r\n        <div className=\"hero-image\">\r\n          <div className=\"picture-holder\"></div>\r\n        </div>\r\n        <div className=\"form-part\">\r\n          <h1>Register</h1>\r\n          <p>Your inviter is ID {router.query.id}</p>\r\n          <form\r\n            className=\"automatic\"\r\n            onSubmit={async (event) => {\r\n              event.preventDefault();\r\n              await register(refAddress);\r\n              //   const newUser = account;\r\n              //   setAccount(newUser);\r\n            }}\r\n          >\r\n            <button className=\"auto\">\r\n              Register\r\n              {/* {!isLoading ? <b>Authorisation</b> : <b>Loading</b>} */}\r\n            </button>\r\n          </form>\r\n\r\n          <p>Telegram Channel @cryptoofficial</p>\r\n        </div>\r\n      </div>\r\n      <style jsx>{`\r\n        .header {\r\n          width: 100vw;\r\n          height: 100vh;\r\n          overflow: hidden;\r\n          background: rgba(16, 1, 62, 1);\r\n          display: flex;\r\n        }\r\n        @media only screen and (max-width: 1000px) {\r\n          .header {\r\n            height: auto;\r\n          }\r\n        }\r\n        .hero-image {\r\n          width: 70vw;\r\n          height: 100vw;\r\n        }\r\n        .picture-holder {\r\n          width: 100%;\r\n          height: 100vh;\r\n          background-image: url(\"/assets/img/hero-picture.jpg\");\r\n          background-repeat: no-repeat;\r\n          background-size: contain;\r\n          background-position: center;\r\n        }\r\n        .hero {\r\n          width: 100%;\r\n        }\r\n        .form-part {\r\n          background: rgba(28, 22, 85, 1);\r\n          width: 30vw;\r\n          padding: 60px;\r\n          color: white;\r\n          height: 100vh;\r\n          text-align: center;\r\n        }\r\n\r\n        p {\r\n          color: grey;\r\n        }\r\n        h1 {\r\n          margin-top: 15vh;\r\n          margin-bottom: 5vh;\r\n          font-size: 1.5em;\r\n        }\r\n        button {\r\n          width: 100%;\r\n          text-align: center;\r\n          padding: 20px 0;\r\n          border-radius: 30px;\r\n          color: white;\r\n          font-size: 1.2em;\r\n        }\r\n\r\n        @media only screen and (max-width: 1000px) {\r\n          .hero-image {\r\n            display: none;\r\n          }\r\n          .form-part {\r\n            width: 95vw;\r\n            margin: auto auto;\r\n          }\r\n        }\r\n        .auto {\r\n          background: rgb(0, 237, 47);\r\n          background: linear-gradient(\r\n            306deg,\r\n            rgba(0, 237, 47, 1) 29%,\r\n            rgba(0, 179, 35, 1) 64%,\r\n            rgba(0, 179, 35, 1) 83%\r\n          );\r\n          box-shadow: none;\r\n          outline: none;\r\n          border: none;\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RefLink;\r\n"]},"metadata":{},"sourceType":"module"}