{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\crfab\\\\Desktop\\\\forsage-boilerplate\\\\components\\\\login\\\\ManualLogin.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport AccountContext from \"../AccountContext\";\nimport { ABI, ADDRESS } from \"../../utils/globals\";\nimport { loadWeb3 } from \"../../utils/utility\";\nimport Web3 from \"web3\";\nimport Router from \"next/router\";\nimport { redirect } from \"next/dist/next-server/server/api-utils\";\n\nvar ManualLogin = /*#__PURE__*/function (_Component) {\n  _inherits(ManualLogin, _Component);\n\n  var _super = _createSuper(ManualLogin);\n\n  _createClass(ManualLogin, [{\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var web3, contract, isExists, _account, _isExists;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n                this.setState({\n                  account: this.context.account\n                });\n                contract = new web3.eth.Contract(ABI, ADDRESS);\n                this.setState({\n                  contract: contract\n                });\n\n                if (!(this.state.account[1] === \"x\")) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.next = 8;\n                return contract.methods.isUserExists(this.state.account).call();\n\n              case 8:\n                isExists = _context.sent;\n                this.setState({\n                  isExist: isExists\n                });\n                _context.next = 19;\n                break;\n\n              case 12:\n                _context.next = 14;\n                return contract.methods.idToAddress(this.state.account).call();\n\n              case 14:\n                _account = _context.sent;\n                _context.next = 17;\n                return contract.methods.isUserExists(_account).call();\n\n              case 17:\n                _isExists = _context.sent;\n                this.setState({\n                  isExist: _isExists\n                }, {\n                  account: _account\n                });\n\n              case 19:\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](0);\n                window.alert(\"Trouble Connecting please try again!\" + _context.t0);\n\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 21]]);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }() //   const isExists = await contract.methods\n    //   .isUserExists(this.state.account)\n    //   .call();\n    // this.setState({ isExist: isExists });\n\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return loadWeb3();\n\n              case 3:\n                _context2.next = 5;\n                return this.loadBlockchainData();\n\n              case 5:\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                window.alert(\"Invalid ETH ADDRESS, Checksum doesnt match\");\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 7]]);\n      }));\n\n      function login() {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"redirect\",\n    value: function redirect() {\n      if (this.state.isExist) {\n        Router.push(\"/dashboard\");\n      } else {\n        window.alert(\"The user you are looking for doesn't exist. Try another one!\");\n      }\n    }\n  }]);\n\n  function ManualLogin(props) {\n    var _this;\n\n    _classCallCheck(this, ManualLogin);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      account: \"\",\n      isExist: false\n    };\n    return _this;\n  }\n\n  _createClass(ManualLogin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$context = this.context,\n          account = _this$context.account,\n          setAccount = _this$context.setAccount;\n      return __jsx(React.Fragment, null, __jsx(\"form\", {\n        onSubmit: /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n            var newUser;\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    event.preventDefault();\n                    _context3.next = 3;\n                    return _this2.login();\n\n                  case 3:\n                    newUser = _this2.state.account;\n                    setAccount(newUser);\n\n                    _this2.redirect();\n\n                  case 6:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }(),\n        className: \"jsx-901526722\" + \" \" + \"manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }, __jsx(\"input\", {\n        type: \"text\",\n        onChange: function onChange(event) {\n          var address = _this2.input.value.toString();\n\n          _this2.setState({\n            account: address\n          });\n\n          console.log(_this2.state.account);\n        },\n        ref: function ref(input) {\n          _this2.input = input;\n        },\n        placeholder: \"Wallet Address or ID...\",\n        className: \"jsx-901526722\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }\n      }), __jsx(\"button\", {\n        className: \"jsx-901526722\" + \" \" + \"manual-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      }, __jsx(\"b\", {\n        className: \"jsx-901526722\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, \"Viewing\"))), __jsx(_JSXStyle, {\n        id: \"901526722\",\n        __self: this\n      }, \".manual-btn.jsx-901526722{background:rgb(55,214,255);background:linear-gradient( 223deg, rgba(55,214,255,1) 0%, rgba(16,83,245,1) 46% );box-shadow:none;outline:none;border:none;}input.jsx-901526722{width:100%;background:rgba(16,1,62,1);box-shadow:none;outline:none;border:none;padding:20px 20px;border-radius:30px;font-size:1.2em;margin:30px 0;color:grey;}button.jsx-901526722{width:100%;text-align:center;padding:20px 0;border-radius:30px;color:white;font-size:1.2em;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY3JmYWJcXERlc2t0b3BcXGZvcnNhZ2UtYm9pbGVycGxhdGVcXGNvbXBvbmVudHNcXGxvZ2luXFxNYW51YWxMb2dpbi5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBaUdvQixBQUcwQyxBQVdsQixBQWFBLFdBWm1CLEFBYVosZ0JBcEJqQixFQXFCYyxTQWJDLE1BY0csVUFiTixTQWNELElBYkEsUUFjSSxJQWJFLFlBY3BCLE1BYnFCLGFBWEgsTUFZQSxVQVhILE1BWUMsT0FYRixPQVlELEtBWGIsTUFZQSIsImZpbGUiOiJDOlxcVXNlcnNcXGNyZmFiXFxEZXNrdG9wXFxmb3JzYWdlLWJvaWxlcnBsYXRlXFxjb21wb25lbnRzXFxsb2dpblxcTWFudWFsTG9naW4uanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgQWNjb3VudENvbnRleHQgZnJvbSBcIi4uL0FjY291bnRDb250ZXh0XCI7XHJcbmltcG9ydCB7IEFCSSwgQUREUkVTUyB9IGZyb20gXCIuLi8uLi91dGlscy9nbG9iYWxzXCI7XHJcbmltcG9ydCB7IGxvYWRXZWIzIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3V0aWxpdHlcIjtcclxuaW1wb3J0IFdlYjMgZnJvbSBcIndlYjNcIjtcclxuaW1wb3J0IFJvdXRlciBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcclxuaW1wb3J0IHsgcmVkaXJlY3QgfSBmcm9tIFwibmV4dC9kaXN0L25leHQtc2VydmVyL3NlcnZlci9hcGktdXRpbHNcIjtcclxuXHJcbmNsYXNzIE1hbnVhbExvZ2luIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBBY2NvdW50Q29udGV4dDtcclxuXHJcbiAgYXN5bmMgbG9hZEJsb2NrY2hhaW5EYXRhKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgd2ViMyA9IG5ldyBXZWIzKFdlYjMuZ2l2ZW5Qcm92aWRlciB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6ODU0NVwiKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGFjY291bnQ6IHRoaXMuY29udGV4dC5hY2NvdW50IH0pO1xyXG4gICAgICBjb25zdCBjb250cmFjdCA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdChBQkksIEFERFJFU1MpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgY29udHJhY3QgfSk7XHJcbiAgICAgIGlmICh0aGlzLnN0YXRlLmFjY291bnRbMV0gPT09IFwieFwiKSB7XHJcbiAgICAgICAgY29uc3QgaXNFeGlzdHMgPSBhd2FpdCBjb250cmFjdC5tZXRob2RzXHJcbiAgICAgICAgICAuaXNVc2VyRXhpc3RzKHRoaXMuc3RhdGUuYWNjb3VudClcclxuICAgICAgICAgIC5jYWxsKCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzRXhpc3Q6IGlzRXhpc3RzIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IF9hY2NvdW50ID0gYXdhaXQgY29udHJhY3QubWV0aG9kc1xyXG4gICAgICAgICAgLmlkVG9BZGRyZXNzKHRoaXMuc3RhdGUuYWNjb3VudClcclxuICAgICAgICAgIC5jYWxsKCk7XHJcbiAgICAgICAgY29uc3QgaXNFeGlzdHMgPSBhd2FpdCBjb250cmFjdC5tZXRob2RzLmlzVXNlckV4aXN0cyhfYWNjb3VudCkuY2FsbCgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0V4aXN0OiBpc0V4aXN0cyB9LCB7IGFjY291bnQ6IF9hY2NvdW50IH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHdpbmRvdy5hbGVydChcIlRyb3VibGUgQ29ubmVjdGluZyBwbGVhc2UgdHJ5IGFnYWluIVwiICsgZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAgIGNvbnN0IGlzRXhpc3RzID0gYXdhaXQgY29udHJhY3QubWV0aG9kc1xyXG4gIC8vICAgLmlzVXNlckV4aXN0cyh0aGlzLnN0YXRlLmFjY291bnQpXHJcbiAgLy8gICAuY2FsbCgpO1xyXG4gIC8vIHRoaXMuc2V0U3RhdGUoeyBpc0V4aXN0OiBpc0V4aXN0cyB9KTtcclxuXHJcbiAgYXN5bmMgbG9naW4oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBsb2FkV2ViMygpO1xyXG4gICAgICBhd2FpdCB0aGlzLmxvYWRCbG9ja2NoYWluRGF0YSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHdpbmRvdy5hbGVydChcIkludmFsaWQgRVRIIEFERFJFU1MsIENoZWNrc3VtIGRvZXNudCBtYXRjaFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZGlyZWN0KCkge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUuaXNFeGlzdCkge1xyXG4gICAgICBSb3V0ZXIucHVzaChcIi9kYXNoYm9hcmRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB3aW5kb3cuYWxlcnQoXHJcbiAgICAgICAgXCJUaGUgdXNlciB5b3UgYXJlIGxvb2tpbmcgZm9yIGRvZXNuJ3QgZXhpc3QuIFRyeSBhbm90aGVyIG9uZSFcIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGFjY291bnQ6IFwiXCIsXHJcbiAgICAgIGlzRXhpc3Q6IGZhbHNlLFxyXG4gICAgfTtcclxuICB9XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBhY2NvdW50LCBzZXRBY2NvdW50IH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICAgIDxmb3JtXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJtYW51YWxcIlxyXG4gICAgICAgICAgb25TdWJtaXQ9e2FzeW5jIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvZ2luKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSB0aGlzLnN0YXRlLmFjY291bnQ7XHJcbiAgICAgICAgICAgIHNldEFjY291bnQobmV3VXNlcik7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3QoKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLmlucHV0LnZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBhZGRyZXNzLFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuYWNjb3VudCk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIHJlZj17KGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIldhbGxldCBBZGRyZXNzIG9yIElELi4uXCJcclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cIm1hbnVhbC1idG5cIj5cclxuICAgICAgICAgICAgPGI+Vmlld2luZzwvYj5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAubWFudWFsLWJ0biB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYig1NSwgMjE0LCAyNTUpO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXHJcbiAgICAgICAgICAgICAgMjIzZGVnLFxyXG4gICAgICAgICAgICAgIHJnYmEoNTUsIDIxNCwgMjU1LCAxKSAwJSxcclxuICAgICAgICAgICAgICByZ2JhKDE2LCA4MywgMjQ1LCAxKSA0NiVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZTtcclxuICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcclxuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaW5wdXQge1xyXG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgxNiwgMSwgNjIsIDEpO1xyXG4gICAgICAgICAgICBib3gtc2hhZG93OiBub25lO1xyXG4gICAgICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggMjBweDtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMzBweDtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcclxuICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDA7XHJcbiAgICAgICAgICAgIGNvbG9yOiBncmV5O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGJ1dHRvbiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggMDtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMzBweDtcclxuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEuMmVtO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgPC8+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWFudWFsTG9naW47XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\crfab\\\\\\\\Desktop\\\\\\\\forsage-boilerplate\\\\\\\\components\\\\\\\\login\\\\\\\\ManualLogin.jsx */\"));\n    }\n  }]);\n\n  return ManualLogin;\n}(Component);\n\n_defineProperty(ManualLogin, \"contextType\", AccountContext);\n\nexport default ManualLogin;","map":{"version":3,"sources":["C:/Users/crfab/Desktop/forsage-boilerplate/components/login/ManualLogin.jsx"],"names":["React","Component","AccountContext","ABI","ADDRESS","loadWeb3","Web3","Router","redirect","ManualLogin","web3","givenProvider","setState","account","context","contract","eth","Contract","state","methods","isUserExists","call","isExists","isExist","idToAddress","_account","window","alert","loadBlockchainData","push","props","setAccount","event","preventDefault","login","newUser","address","input","value","toString","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport AccountContext from \"../AccountContext\";\r\nimport { ABI, ADDRESS } from \"../../utils/globals\";\r\nimport { loadWeb3 } from \"../../utils/utility\";\r\nimport Web3 from \"web3\";\r\nimport Router from \"next/router\";\r\nimport { redirect } from \"next/dist/next-server/server/api-utils\";\r\n\r\nclass ManualLogin extends Component {\r\n  static contextType = AccountContext;\r\n\r\n  async loadBlockchainData() {\r\n    try {\r\n      const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\r\n      this.setState({ account: this.context.account });\r\n      const contract = new web3.eth.Contract(ABI, ADDRESS);\r\n      this.setState({ contract });\r\n      if (this.state.account[1] === \"x\") {\r\n        const isExists = await contract.methods\r\n          .isUserExists(this.state.account)\r\n          .call();\r\n        this.setState({ isExist: isExists });\r\n      } else {\r\n        const _account = await contract.methods\r\n          .idToAddress(this.state.account)\r\n          .call();\r\n        const isExists = await contract.methods.isUserExists(_account).call();\r\n        this.setState({ isExist: isExists }, { account: _account });\r\n      }\r\n    } catch (e) {\r\n      window.alert(\"Trouble Connecting please try again!\" + e);\r\n    }\r\n  }\r\n\r\n  //   const isExists = await contract.methods\r\n  //   .isUserExists(this.state.account)\r\n  //   .call();\r\n  // this.setState({ isExist: isExists });\r\n\r\n  async login() {\r\n    try {\r\n      await loadWeb3();\r\n      await this.loadBlockchainData();\r\n    } catch (err) {\r\n      window.alert(\"Invalid ETH ADDRESS, Checksum doesnt match\");\r\n    }\r\n  }\r\n\r\n  redirect() {\r\n    if (this.state.isExist) {\r\n      Router.push(\"/dashboard\");\r\n    } else {\r\n      window.alert(\r\n        \"The user you are looking for doesn't exist. Try another one!\"\r\n      );\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      account: \"\",\r\n      isExist: false,\r\n    };\r\n  }\r\n  render() {\r\n    const { account, setAccount } = this.context;\r\n    return (\r\n      <>\r\n        <form\r\n          className=\"manual\"\r\n          onSubmit={async (event) => {\r\n            event.preventDefault();\r\n            await this.login();\r\n            const newUser = this.state.account;\r\n            setAccount(newUser);\r\n            this.redirect();\r\n          }}\r\n        >\r\n          <input\r\n            type=\"text\"\r\n            onChange={(event) => {\r\n              const address = this.input.value.toString();\r\n              this.setState({\r\n                account: address,\r\n              });\r\n              console.log(this.state.account);\r\n            }}\r\n            ref={(input) => {\r\n              this.input = input;\r\n            }}\r\n            placeholder=\"Wallet Address or ID...\"\r\n          />\r\n          <button className=\"manual-btn\">\r\n            <b>Viewing</b>\r\n          </button>\r\n        </form>\r\n        <style jsx>{`\r\n          .manual-btn {\r\n            background: rgb(55, 214, 255);\r\n            background: linear-gradient(\r\n              223deg,\r\n              rgba(55, 214, 255, 1) 0%,\r\n              rgba(16, 83, 245, 1) 46%\r\n            );\r\n            box-shadow: none;\r\n            outline: none;\r\n            border: none;\r\n          }\r\n          input {\r\n            width: 100%;\r\n            background: rgba(16, 1, 62, 1);\r\n            box-shadow: none;\r\n            outline: none;\r\n            border: none;\r\n            padding: 20px 20px;\r\n            border-radius: 30px;\r\n            font-size: 1.2em;\r\n            margin: 30px 0;\r\n            color: grey;\r\n          }\r\n\r\n          button {\r\n            width: 100%;\r\n            text-align: center;\r\n            padding: 20px 0;\r\n            border-radius: 30px;\r\n            color: white;\r\n            font-size: 1.2em;\r\n          }\r\n        `}</style>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManualLogin;\r\n"]},"metadata":{},"sourceType":"module"}